<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#007acc" />
  <title>Meesa Chat</title>

  <!-- PWA -->
  <link rel="manifest" href="/manifest.json" />
  <link rel="icon" href="/icon-192.png" />
  <link rel="apple-touch-icon" href="/icon-192.png" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Meesa" />
</head>
<body style="font-family: sans-serif; background: #1e1e1e; color: #eee; padding: 20px;">

  <h1>Meesa Chat App</h1>

  <button id="googleSignIn">Sign in with Google</button>
  <button id="logoutBtn" style="display: none;">Logout</button>

  <div>
    <label>
      <select id="roomSelect">
        <option value="general">General</option>
        <option value="random">Random</option>
      </select>
    </label>
    <button id="togglePrivacy">Private Chat</button>
  </div>

  <div id="directArea" style="display: none;">
    <label for="peerSelect">Select Peer:</label>
    <select id="peerSelect"></select>
  </div>

  <div id="chat" style="background: #2a2a2a; border: 1px solid #444; height: 50vh; overflow-y: auto; padding: 10px; margin: 10px 0;"></div>

  <div>
    <input id="message" placeholder="Type a message..." style="width: 70%;" />
    <button id="send">Send</button>
  </div>

  <div id="typingIndicator" style="font-style: italic;"></div>

  <!-- Firebase & App Scripts -->
  <script type="module" src="/js/index.js"></script>

  <!-- Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(reg => console.log('✅ SW registered:', reg.scope))
          .catch(err => console.error('❌ SW registration failed:', err));
      });
    }
  </script>
</body>
</html>
